# 2019.12.26

бинарный формат с индексированием записей, создание и чтение - из файла

структура дерева хранится в индексе для быстрой итерации по дереву. Каждый индекс содержит id запаиси, ссылку на родителя, абсолютный адрес файловой записи в файле и длину данных

сами записи хранятся непрерывным списком структур

запись происходит непосредственно в файл при операции добавления, весь список данных не хранится в памяти. Отсюда - сначала записиываем данные, попутно формируем индекс, обновляем заголовок и записываем индекс

```
----------------------------
header
----------------------------
data
----------------------------
index dict
----------------------------
```


## тек. реализация 2019.12.26
<!-- 
при создании базы из 74000 файлов, сканирование происходит быстро, но потом долго выполняются какие-то операции и подъедается память

при чтении такой базы - рутовые файлы выбираются шустро -->

