# Bss

Описание формата Bss - v1

Данные хранятся в сжатом(gzip) файле в бинарном виде.


## Форматы данных

- uint 4 - unsigned int 4 bytes
- bstr - счётная строка [[str_len - uint 4][binary string - str_len]]

## Структура документа

Данные располагаются последовательно в определённых секциях.

[magic][version][header_len][header_struct][magic][row_len][row_struct]...[row_len][row_struct][magic]

- magic 		[uint 4] - идентификатор файла и метка контроля структуры
- version 		[uint 4] - версия структуры файла
- header_len 	[uint 4] - длина данных структуры заголовка
- row_len		[uint 4] - длина данных структуры строки данных файла
- header_struct - структура заголовка
- row_struct - структура строки данных

Чтение из файла производится последовательно, начиная с начала.

По возможности записать кол-во файлов в заголовок






### magic

идентификатор файла - заданная константа для проверки типа файла

198411121




### Заголовок - header_struct

Содержит данные, описывающие свойства всего тома

[created][icon][records][name][scan_path][description]

- created 		[uint 4]	- дата создания(unix timestamp)
- icon 			[uint 4]	- id иконки
- records  		[uint 4] 	- кол-во записей
- name 			[bstr]		- название тома
- scan_path		[bstr]		- путь до ресурса сканирования
- description 	[bstr]		- произвольное описание









# TODO

## Структура Записи данных - row_struct




## Порядок чтения

- Открыть файл на чтение
- Проверить идентификатор
- Прочитать версию формата, и выбрать способ дальнейшего декодирования
- Прочитать размер заголовка
- Прочитать заголовок
- Проверить контроль
- Прочитать длину строки данных
- Прочитать строку данных
- Повторить чтение данных
- Проверить контроль

